<aside>
  <button
    pButton
    pRipple
    icon="pi pi-refresh"
    label="Recharger la table"
    class="p-button p-button-success p-button-outlined p-button-raised"
  ></button>
  <button
    pButton
    pRipple
    icon="pi pi-pencil"
    label="Nouveau contrat"
    class="p-button p-button-secondary p-button-outlined p-button-raised"
  ></button>
</aside>

<p-table
  [columns]="columns"
  [value]="contracts"
  #table
  dataKey="ContratId"
  responsiveLayout="scroll"
  sortMode="multiple"
  sortField="ContratId"
  responsiveLayout="scroll"
  (onPage)="loadMore($event)"
  currentPageReportTemplate="{first} sur {last} de {totalRecords} vos contrats"
  [rowHover]="true"
  [rows]="10"
  [loading]="isLoading"
  [totalRecords]="recordsNumber"
  [showCurrentPageReport]="true"
  [rowsPerPageOptions]="[10, 25, 50]"
  [paginator]="true"
  [filterDelay]="0"
  [resizableColumns]="true"
  [globalFilterFields]="columns"
  [style]="{ 'margin-top': '20px' }"
>
  <ng-template pTemplate="caption"> Liste de vos contrats</ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="ContratId">
        <div class="flex justify-content-center align-items-center">
          Identifiant du contrat
          <p-sortIcon field="ContratId"></p-sortIcon>

          <p-columnFilter field="ContratId" display="menu"></p-columnFilter>
        </div>
      </th>

      <th pSortableColumn="ClientId">
        <div class="flex justify-content-center align-items-center">
          Identifiant du client
          <p-sortIcon field="ClientId"></p-sortIcon>

          <p-columnFilter field="ClientId" display="menu"></p-columnFilter>
        </div>
      </th>

      <th pSortableColumn="IsActive">
        <div class="flex justify-content-center align-items-center">
          Statut
          <p-sortIcon field="IsActive"></p-sortIcon>
        </div>
      </th>

      <th pSortableColumn="DateCreation">
        <div class="flex justify-content-center align-items-center">
          Date de cr√©ation
          <p-sortIcon field="DateCreation"></p-sortIcon>

          <p-columnFilter
            type="date"
            field="ContratId"
            display="menu"
          ></p-columnFilter>
        </div>
      </th>
      <th>Actions</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-contract>
    <tr>
      <td>{{ contract.ContratId }}</td>

      <td>{{ contract.ClientId }}</td>

      <td>
        <button
          pButton
          pRipple
          [label]="contract.IsActive ? 'En cours' : 'Suspendu'"
          class="p-button-outlined p-button-rounded p-button-text"
          [class]="contract.IsActive ? 'p-button-success' : 'p-button-danger'"
        ></button>
      </td>

      <td>{{ contract.DateCreation }}</td>

      <td>
        <button
          pButton
          pRipple
          icon="pi pi-pencil"
          class="p-button-rounded p-button-success mr-2 edit"
        ></button>

        <button
          pButton
          pRipple
          icon="pi pi-pause"
          class="p-button-rounded p-button-danger delete"
        ></button>
      </td>
    </tr>
  </ng-template>
</p-table>
