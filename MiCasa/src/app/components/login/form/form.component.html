<form [formGroup]="myForm">
  <!--Email input-->
  <div
    class="form-outline mb-4"
    data-aos="zoom-in"
    data-aos-delay="1200"
    data-aos-duration="600"
    data-aos-easing="ease-in-out"
  >
    <span class="p-float-label">
      <input
        type="email"
        id="emailInput"
        class="form-control form-control-lg"
        pInputText
        formControlName="email"
      />
      <label for="emailInput"> Email</label>
    </span>

    <!--Error messages-->
    <div
      *ngIf="
        myForm.get('email')?.invalid &&
        (myForm.get('email')?.dirty || myForm.get('email')?.touched)
      "
    >
      <p-message
        *ngIf="myForm.get('email')?.invalid"
        severity="error"
        text="Email invalide"
      ></p-message>

      <p-message
        *ngIf="(myForm.get('email')?.errors)!['required']"
        severity="error"
        text="Email requis"
        class="not-first-message"
      >
      </p-message>
    </div>
  </div>
  <!--End email-->

  <!--Password input-->
  <div
    class="form-outline mb-4"
    data-aos="zoom-in"
    data-aos-delay="1200"
    data-aos-duration="600"
    data-aos-easing="ease-in-out"
  >
    <span class="p-float-label">
      <input
        type="password"
        id="passwordInput"
        class="form-control form-control-lg"
        formControlName="password"
        pInputText
      />
      <label for="passwordInput">Mot de passe</label>
    </span>

    <!--Error messages-->
    <div
      *ngIf="
        myForm.get('password')?.invalid &&
        (myForm.get('password')?.dirty || myForm.get('password')?.touched)
      "
    >
      <p-message
        *ngIf="myForm.get('password')?.invalid"
        severity="error"
        text="Mot de passe invalide"
      ></p-message>

      <p-message
        *ngIf="(myForm.get('password')?.errors)!['required']"
        severity="error"
        text="Mot de passe requis"
        class="not-first-message"
      >
      </p-message>
    </div>
  </div>

  <!--End password-->

  <div
    class="pt-1 mb-4"
    data-aos="fade-up"
    data-aos-delay="800"
    data-aos-easing="ease-in-out"
  >
    <button
      pButton
      pRipple
      type="button"
      label="Se connecter"
      class="p-button-raised p-button-rounded p-button-success p-button-outlined btn-block"
      (click)="lezgo()"
    ></button>

    <button
      pButton
      pRipple
      type="button"
      class="p-button-text password-reset"
      aria-label="Login in MiCasa"
      (click)="displayModal = true"
    >
      Mot de passe oubliÃ© ?
    </button>

    <!--Alternatives-->

    <span class="d-block text-center my-4 text-muted">&mdash; OU &mdash;</span>
    <app-form-button
      (modalController)="displayRegistrationModal(displayRegistration)"
    ></app-form-button>
  </div>
</form>

<!--Registration dialog-->
<p-dialog
  *ngIf="displayRegistration"
  header="Inscription"
  [(visible)]="displayModal"
  [breakpoints]="{ '960px': '75vw' }"
  [draggable]="false"
  [resizable]="false"
  [style]="{ width: '80vw', height: '100vh' }"
  (onHide)="displayModal = false"
>
  <app-registration [displayModal]="displayModal"></app-registration>

  <!-- End content-->
  <ng-template pTemplate="footer">
    <p-button
      icon="pi pi-check"
      (click)="displayModal = false"
      label="Ok"
      styleClass="p-button-text"
    ></p-button>
  </ng-template>
</p-dialog>

<!--Reset password dialog-->
<p-dialog
  *ngIf="displayModal"
  [(visible)]="displayModal"
  [breakpoints]="{ '960px': '75vw' }"
  [style]="{ width: '50vw' }"
  [draggable]="false"
  [resizable]="false"
  (onHide)="displayModal = false"
>
  <app-reset-password></app-reset-password>
  <ng-template pTemplate="footer">
    <p-button
      (click)="displayModal = false"
      label="Ok"
      styleClass="p-button-text"
    ></p-button>
  </ng-template>
</p-dialog>
