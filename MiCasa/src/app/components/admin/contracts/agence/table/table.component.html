<p-table
  #table
  sortMode="multiple"
  dataKey="Id"
  responsiveLayout="scroll"
  sortMode="multiple"
  sortField="Id"
  responsiveLayout="scroll"
  currentPageReportTemplate="{first} sur {last} de {contracts.length} agences"
  (onPage)="loadMore($event)"
  [value]="contracts"
  [rowHover]="true"
  [rows]="10"
  [loading]="isLoading"
  [totalRecords]="contracts.length"
  [showCurrentPageReport]="true"
  [rowsPerPageOptions]="[10, 25, 50]"
  [paginator]="true"
  [filterDelay]="0"
  [resizableColumns]="true"
  [globalFilterFields]="[
    'Id',
    'Nom',
    'Mail',
    'Téléphone',
    'Date',
    'Signalement',
    'Statut'
  ]"
  [style]="{ 'margin-top': '20px' }"
>
  <!-- Table caption -->
  <ng-template pTemplate="caption"> Liste des contrats </ng-template>

  <ng-template pTemplate="header">
    <tr>
      <th pSortableColumn="Id">
        <div class="flex justify-content-center align-items-center">
          Id
          <p-sortIcon field="Id"></p-sortIcon>

          <p-columnFilter
            type="numeric"
            field="Id"
            display="menu"
          ></p-columnFilter>
        </div>
      </th>
      <th pSortableColumn="Date">
        <div class="flex justify-content-center align-items-center">
          Date
          <p-sortIcon field="Date"></p-sortIcon>

          <p-columnFilter
            type="text"
            field="Date"
            display="menu"
          ></p-columnFilter>
        </div>
      </th>

      <th pSortableColumn="AgenceId">
        <div class="d-inline justify-content-center align-items-center">
          AgenceId
          <p-sortIcon field="AgenceId"></p-sortIcon>
        </div>

        <p-columnFilter
          type="text"
          field="AgenceId"
          display="menu"
        ></p-columnFilter>
      </th>

      <th pSortableColumn="Statut">
        <div class="d-inline justify-content-center align-items-center">
          Statut
          <p-sortIcon field="Statut"></p-sortIcon>
        </div>

        <p-columnFilter
          type="text"
          field="Statut"
          display="menu"
        ></p-columnFilter>
      </th>

      <th>Actions</th>
    </tr>
  </ng-template>

  <ng-template pTemplate="body" let-contract>
    <tr>
      <td>
        {{ contract.ContratId }}
      </td>
      <td>
        {{ contract.DateCreation }}
      </td>

      <td>
        {{ contract.AgenceId }}
      </td>

      <td>
        {{ contract.IsActive }}
      </td>

      <td *ngIf="contract.IsActive === 0">
        <button
          pButton
          pRipple
          label="Désactivé"
          class="p-button-outlined p-button-success p-button-rounded p-button-text"
        ></button>
      </td>

      <td *ngIf="contract.IsActive === 1">
        <button
          pButton
          pRipple
          label="Activé"
          class="p-button-outlined p-button-danger p-button-rounded p-button-text"
        ></button>
      </td>

      <td>
        <button
          pButton
          pRipple
          icon="pi pi-pencil"
          class="p-button-rounded p-button-success mr-2 edit"
        ></button>

        <button
          pButton
          pRipple
          icon="pi pi-trash"
          class="p-button-rounded p-button-danger delete"
        ></button>
      </td>
    </tr>
  </ng-template>
</p-table>
